import json
from src.dataset_builder import AutoLabeler  # 引用共用邏輯
from src.config import LABEL2ID              # 引用共用設定

# ==========================================
# 1. 定義要標註的資料 (Data Definition)
# ==========================================
# 根據你的指示：將「國家」及「地區」相關字眼加入 B-ADDRESS
entity_mapping = {
    "B-ORG": [
        "中國國家鐵路集團有限公司",
        "國鐵集團"
    ],
    "B-ADDRESS": [
        "中國",    # 國家
        "長贛",    # 地區簡稱 (長沙至贛州)
        "瀋白"     # 地區簡稱 (瀋陽至白山)
    ]
}

raw_content = """據中國國家鐵路集團有限公司今（4日）披露，鐵路「十四五」實現圓滿收官。「十四五」期間，全國鐵路營業里程由14.63萬公里增至16.5萬公里、增長12.8%，高鐵由3.79萬公里增至5.04萬公里、增長32.98%，中國建成世界規模最大、先進發達的高速鐵路網。

2025年，國鐵集團加快建設現代化鐵路基礎設施體系，圓滿完成鐵路建設任務，全國鐵路完成固定資產投資9015億元人民幣、同比增長6%，投產新線3109公里，其中高鐵2862公里，鐵路投資拉動作用充分顯現。

2025年，國鐵集團以國家「十四五」規劃綱要確定的102項重大工程鐵路項目和「兩重」項目為重點，加大實施力度，長贛高鐵等8個項目開工建設，瀋白高鐵等25個項目開通運營。加快物流基礎設施建設，建成鐵路專用線52條。

「十五五」期間，國鐵集團將進一步推進鐵路網建設。到2030年，全國鐵路營業里程達到18萬公里左右，其中高鐵6萬公里左右，復線率和電氣化率分別達到64%和78%，戰略骨幹通道全面加強，「八縱八橫」高鐵系統成網，區域互聯互通水平顯著提升，貨運網絡能力大幅增強，基本建成世界一流的現代化鐵路網。

原文網址：https://news.mingpao.com/ins/%E5%85%A9%E5%B2%B8/article/20260104/s00004/1767518315152"""

# ==========================================
# 2. 執行處理 (Execution)
# ==========================================
if __name__ == "__main__":
    # 初始化標註器
    labeler = AutoLabeler()
    
    # 執行處理
    news_data = labeler.process(raw_content, entity_mapping)

    # 儲存
    output_file = "./data/raw/news_data.json"
    with open(output_file, "w", encoding="utf-8") as f:
        json.dump(news_data, f, ensure_ascii=False, indent=2)

    print(f"✅ 搞掂！已處理 {len(news_data)} 條數據。")
    print(f"   - 已將 {entity_mapping['B-ADDRESS']} 標記為 ADDRESS")